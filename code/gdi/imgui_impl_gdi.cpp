#include <imgui.h>
#include <base.h>
#include "gdi.h"
#include "imgui_impl_gdi.h"

function buffer Get_Vertex_Shader_Code();
function buffer Get_Pixel_Shader_Code();

function ImGui_ImplGDI_Data* ImGui_ImplGDI_GetBackendData() {
    return ImGui::GetCurrentContext() ? (ImGui_ImplGDI_Data*)ImGui::GetIO().BackendRendererUserData : nullptr;
}

export_function gdi_handle ImGui_ImplGDI_GetBindGroup(ImTextureID TexID) {
	return GDI_Make_Handle(BIND_GROUP, (u32)TexID);
}

export_function void ImGui_ImplGDI_Init(gdi_handle Swapchain) {
    ImGuiIO* IO = &ImGui::GetIO();
    IMGUI_CHECKVERSION();
    IM_ASSERT(IO->BackendRendererUserData == nullptr && "Already initialized a renderer backend!");

    // Setup backend capabilities flags
	arena* Arena = Arena_Create(String_Lit("ImGui_GDI_Backend_Renderer"));
	ImGui_ImplGDI_Data* BackendData = Arena_Push_Struct(Arena, ImGui_ImplGDI_Data);
	BackendData->Arena = Arena;

    IO->BackendRendererUserData = (void*)BackendData;
    IO->BackendRendererName = "imgui_impl_gdi";
    IO->BackendFlags |= ImGuiBackendFlags_RendererHasVtxOffset;  // We can honor the ImDrawCmd::VtxOffset field, allowing for large meshes.
    IO->BackendFlags |= ImGuiBackendFlags_RendererHasTextures;   // We can honor ImGuiPlatformIO::Textures[] requests during render.

    gdi_sampler_create_info SamplerInfo = {
        .Filter = GDI_FILTER_LINEAR,
        .AddressModeU = GDI_ADDRESS_MODE_CLAMP,
        .AddressModeV = GDI_ADDRESS_MODE_CLAMP
    };
    BackendData->Sampler = GDI_Create_Sampler(&SamplerInfo);

    gdi_bind_group_binding Bindings[] = {
        { GDI_BIND_GROUP_TYPE_TEXTURE, 1 },
        { GDI_BIND_GROUP_TYPE_SAMPLER, 1, &BackendData->Sampler }
    };

    gdi_bind_group_layout_create_info BindGroupLayoutInfo = {
        .Bindings = { Bindings, Array_Count(Bindings) }
    };

    BackendData->BindGroupLayout = GDI_Create_Bind_Group_Layout(&BindGroupLayoutInfo);

	struct imgui_impl_gdi_vtx {
		v2  P;
		v2  UV;
		u32 C;
	};

    gdi_vtx_attribute Attributes[] = {
        { String_Lit("POSITION"), GDI_FORMAT_R32G32_FLOAT },
        { String_Lit("TEXCOORD"), GDI_FORMAT_R32G32_FLOAT },
        { String_Lit("COLOR"), GDI_FORMAT_R8G8B8A8_UNORM }
    };
    
    gdi_vtx_binding VtxBinding = {
        .Stride = sizeof(imgui_impl_gdi_vtx),
        .Attributes = { Attributes, Array_Count(Attributes) }
    };

    gdi_swapchain_info SwapchainInfo = GDI_Get_Swapchain_Info(Swapchain);

    gdi_blend_state BlendState = {
        GDI_BLEND_SRC_ALPHA, GDI_BLEND_INV_SRC_ALPHA
    };

    gdi_shader_create_info ShaderInfo = {
        .VS = Get_Vertex_Shader_Code(),
        .PS = Get_Pixel_Shader_Code(),
        .BindGroupLayouts = { &BackendData->BindGroupLayout, 1 },
        .PushConstantCount = 2,
        .VtxBindings = { &VtxBinding, 1 },
        .RenderTargetFormats = { SwapchainInfo.Format },
        .BlendStates = { &BlendState, 1 }
    };

    BackendData->Shader = GDI_Create_Shader(&ShaderInfo);
}

export_function void ImGui_ImplGDI_NewFrame() {
    ImGui_ImplGDI_Data* Backend = ImGui_ImplGDI_GetBackendData();
    IM_ASSERT(Backend != nullptr && "Context or backend not initialized! Did you call ImGui_ImplGDI_Init()?");
    IM_UNUSED(Backend);
}

function void ImGui_ImplGDI_UpdateTexture(ImTextureData* Texture) {
	ImGui_ImplGDI_Data* BackendData = ImGui_ImplGDI_GetBackendData();
	
	if(Texture->Status == ImTextureStatus_OK)
        return;

    if(Texture->Status == ImTextureStatus_WantCreate) {
        IM_ASSERT(Texture->TexID == ImTextureID_Invalid && Texture->BackendUserData == nullptr);
        IM_ASSERT(Texture->Format == ImTextureFormat_RGBA32);
		

		
		ImGui_ImplGDI_Texture* BackendTexture = BackendData->FirstFreeTexture;
		if (BackendTexture) SLL_Pop_Front(BackendData->FirstFreeTexture);
		else BackendTexture = Arena_Push_Struct_No_Clear(BackendData->Arena, ImGui_ImplGDI_Texture);
		Memory_Clear(BackendTexture, sizeof(ImGui_ImplGDI_Texture));

		//Create the texture handle
		{
			gdi_texture_create_info TextureInfo = {
				.Format = GDI_FORMAT_R8G8B8A8_UNORM,
				.Dim = V2i(Texture->Width, Texture->Height),
				.Usage = GDI_TEXTURE_USAGE_SAMPLED,
				.MipCount = 1
			};

			BackendTexture->Handle = GDI_Create_Texture(&TextureInfo);
		}

		//Create the texture view
		BackendTexture->View = GDI_Create_Texture_View_From_Texture(BackendTexture->Handle);

		//Create the bind group
		{
			gdi_bind_group_write Write = { .TextureViews = { &BackendTexture->View, 1 } };
			gdi_bind_group_create_info BindGroupInfo = {
				.Layout = BackendData->BindGroupLayout,
				.Writes = { &Write, 1 }
			};

			BackendTexture->BindGroup = GDI_Create_Bind_Group(&BindGroupInfo);
		}

        Texture->SetTexID((ImTextureID)BackendTexture->BindGroup.ID.ID);
		Texture->BackendUserData = BackendTexture;
    }

    if(Texture->Status == ImTextureStatus_WantCreate || Texture->Status == ImTextureStatus_WantUpdates) {
		scratch Scratch;
		ImGui_ImplGDI_Texture* BackendTexture = (ImGui_ImplGDI_Texture*)Texture->BackendUserData;
		gdi_handle Handle = BackendTexture->Handle;

		v2i Offset = V2i((Texture->Status == ImTextureStatus_WantCreate) ? 0 : Texture->UpdateRect.x,
						 (Texture->Status == ImTextureStatus_WantCreate) ? 0 : Texture->UpdateRect.y);
		v2i Dim = V2i((Texture->Status == ImTextureStatus_WantCreate) ? Texture->Width : Texture->UpdateRect.w,
					  (Texture->Status == ImTextureStatus_WantCreate) ? Texture->Height : Texture->UpdateRect.h);

		size_t Pitch = Dim.x*Texture->BytesPerPixel;
		u8* Texels = Arena_Push_Array(Scratch.Arena, Pitch * Dim.y, u8);
		u8* TexelsAt = Texels;

		for (s32 i = 0; i < Dim.y; i++) {
			Memory_Copy(TexelsAt, Texture->GetPixelsAt(Offset.x, Offset.y + i), Pitch);
			TexelsAt += Pitch;
		}

		
		buffer UpdateData = Make_Buffer(Texels, Pitch * Dim.y);
		gdi_texture_update TextureUpdate = {
			.Texture = Handle,
			.MipCount = 1,
			.Offset = Offset,
			.Dim = Dim,
			.UpdateData = &UpdateData
		};
		
		GDI_Update_Textures( { &TextureUpdate, 1 });

		Texture->SetStatus(ImTextureStatus_OK);
    }

	if (Texture->Status == ImTextureStatus_WantDestroy) {
		ImGui_ImplGDI_Texture* BackendTexture = (ImGui_ImplGDI_Texture*)Texture->BackendUserData;

		GDI_Delete_Bind_Group(BackendTexture->BindGroup);
		GDI_Delete_Texture_View(BackendTexture->View);
		GDI_Delete_Texture(BackendTexture->Handle);

		Texture->SetTexID(ImTextureID_Invalid);
		Texture->SetStatus(ImTextureStatus_Destroyed);
		Texture->BackendUserData = NULL;
		SLL_Push_Front(BackendData->FirstFreeTexture, BackendTexture);
	}
}

function void ImGui_ImplGDI_SetupRenderState(gdi_render_pass* RenderPass, ImDrawData* DrawData) {
    ImGui_ImplGDI_Data* BackendData = ImGui_ImplGDI_GetBackendData();
    
    Render_Set_Shader(RenderPass, BackendData->Shader);
    Render_Set_Vtx_Buffer(RenderPass, 0, BackendData->VtxBuffer);
    Render_Set_Idx_Buffer(RenderPass, BackendData->IdxBuffer, sizeof(ImDrawIdx) == 2 ? GDI_IDX_FORMAT_16_BIT : GDI_IDX_FORMAT_32_BIT);


    v2 InvResolution = V2_Inverse(V2(DrawData->DisplaySize.x, DrawData->DisplaySize.y));
    Render_Set_Push_Constants(RenderPass, &InvResolution, sizeof(InvResolution));
}

export_function void ImGui_ImplGDI_RenderDrawData(gdi_render_pass* RenderPass, ImDrawData* DrawData) {
    // Avoid rendering when minimized, scale coordinates for retina displays (screen coordinates != framebuffer coordinates)
    v2 FramebufferDim = V2(DrawData->DisplaySize.x * DrawData->FramebufferScale.x,
                           DrawData->DisplaySize.y * DrawData->FramebufferScale.y);
    if (FramebufferDim.x <= 0 || FramebufferDim.y <= 0)
        return;

	//If no UI data, don't render either
	if (!DrawData->TotalVtxCount)
		return;

    ImGui_ImplGDI_Data* BackendData = ImGui_ImplGDI_GetBackendData();

    // Catch up with texture updates. Most of the times, the list will have 1 element with an OK status, aka nothing to do.
    // (This almost always points to ImGui::GetPlatformIO().Textures[] but is part of ImDrawData to allow overriding or disabling texture updates).
    if (DrawData->Textures != nullptr) {
        for (ImTextureData* tex : *DrawData->Textures) {
            if (tex->Status != ImTextureStatus_OK) {
                ImGui_ImplGDI_UpdateTexture(tex);
            }
        }
    }

	size_t VertexSize = DrawData->TotalVtxCount*sizeof(ImDrawVert);
	size_t IndexSize = DrawData->TotalIdxCount*sizeof(ImDrawIdx);

	if(!GDI_Is_Null(BackendData->VtxBuffer) || BackendData->VtxBufferSize < VertexSize) {
		if(!GDI_Is_Null(BackendData->VtxBuffer)) {
			GDI_Delete_Buffer(BackendData->VtxBuffer);
		}

		gdi_buffer_create_info BufferInfo = {
			.Size = VertexSize,
			.Usage = GDI_BUFFER_USAGE_VTX|GDI_BUFFER_USAGE_DYNAMIC
		};
		BackendData->VtxBuffer = GDI_Create_Buffer(&BufferInfo);
	}

	if(!GDI_Is_Null(BackendData->IdxBuffer) || BackendData->IdxBufferSize < IndexSize) {
		if(!GDI_Is_Null(BackendData->IdxBuffer)) {
			GDI_Delete_Buffer(BackendData->IdxBuffer);
		}

		gdi_buffer_create_info BufferInfo = {
			.Size = IndexSize,
			.Usage = GDI_BUFFER_USAGE_IDX|GDI_BUFFER_USAGE_DYNAMIC
		};

		BackendData->IdxBuffer = GDI_Create_Buffer(&BufferInfo);
	}

	ImDrawVert* Vertices = (ImDrawVert*)GDI_Map_Buffer(BackendData->VtxBuffer, 0, 0);
	ImDrawIdx* Indices = (ImDrawIdx*)GDI_Map_Buffer(BackendData->IdxBuffer, 0, 0);

	for(const ImDrawList* DrawList : DrawData->CmdLists) {
		Memory_Copy(Vertices, DrawList->VtxBuffer.Data, DrawList->VtxBuffer.Size*sizeof(ImDrawVert));
		Memory_Copy(Indices, DrawList->IdxBuffer.Data, DrawList->IdxBuffer.Size*sizeof(ImDrawIdx));
		Vertices += DrawList->VtxBuffer.Size;
		Indices += DrawList->IdxBuffer.Size;
	}

	GDI_Unmap_Buffer(BackendData->VtxBuffer);
	GDI_Unmap_Buffer(BackendData->IdxBuffer);

    ImGui_ImplGDI_SetupRenderState(RenderPass, DrawData);

    int VtxOffset = 0;
    int IdxOffset = 0;
    for(const ImDrawList* DrawList : DrawData->CmdLists) {
        for(int CmdIndex = 0; CmdIndex < DrawList->CmdBuffer.Size; CmdIndex++) {
            const ImDrawCmd* Cmd = &DrawList->CmdBuffer[CmdIndex];
            if(Cmd->UserCallback) {
                if(Cmd->UserCallback == ImDrawCallback_ResetRenderState) {
                    ImGui_ImplGDI_SetupRenderState(RenderPass, DrawData);
                } else {
                    Cmd->UserCallback(DrawList, Cmd);
                }
            } else {
                v2 ClipMin = V2(Cmd->ClipRect.x, Cmd->ClipRect.y);
                v2 ClipMax = V2(Cmd->ClipRect.z, Cmd->ClipRect.w);
                if (ClipMin.x < 0.0f) { ClipMin.x = 0.0f; }
                if (ClipMin.y < 0.0f) { ClipMin.y = 0.0f; }
                if (ClipMax.x > FramebufferDim.x) { ClipMax.x = FramebufferDim.x; }
                if (ClipMax.y > FramebufferDim.y) { ClipMax.y = FramebufferDim.y; }
                if (ClipMax.x <= ClipMin.x || ClipMax.y <= ClipMin.y)
                    continue;

				gdi_handle BindGroup = ImGui_ImplGDI_GetBindGroup(Cmd->GetTexID());
				Render_Set_Bind_Group(RenderPass, 0, BindGroup);

                Render_Set_Scissor(RenderPass, (s32)ClipMin.x, (s32)ClipMin.y, (s32)ClipMax.x, (s32)ClipMax.y);
                Render_Draw_Idx(RenderPass, Cmd->ElemCount, Cmd->IdxOffset+IdxOffset, Cmd->VtxOffset+VtxOffset);
            }
        }

        IdxOffset += DrawList->IdxBuffer.Size;
        VtxOffset += DrawList->VtxBuffer.Size;
    }
}

export_function void ImGui_ImplGDI_Shutdown() {
    Not_Implemented;
}

const unsigned char Vertex_Shader_Code[] = {
  0x03, 0x02, 0x23, 0x07, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x0e, 0x00,
  0x2d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x11, 0x00, 0x02, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x56, 0x53, 0x5f, 0x4d, 0x61, 0x69, 0x6e, 0x00,
  0x02, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00,
  0x05, 0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00,
  0x07, 0x00, 0x07, 0x00, 0x08, 0x00, 0x00, 0x00, 0x69, 0x6d, 0x67, 0x75,
  0x69, 0x5f, 0x69, 0x6d, 0x70, 0x6c, 0x5f, 0x67, 0x64, 0x69, 0x2e, 0x68,
  0x6c, 0x73, 0x6c, 0x00, 0x03, 0x00, 0xdd, 0x00, 0x05, 0x00, 0x00, 0x00,
  0x58, 0x02, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x73, 0x74, 0x72, 0x75,
  0x63, 0x74, 0x20, 0x76, 0x73, 0x5f, 0x69, 0x6e, 0x70, 0x75, 0x74, 0x20,
  0x7b, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x66, 0x6c, 0x6f, 0x61, 0x74, 0x32,
  0x20, 0x50, 0x20, 0x3a, 0x20, 0x50, 0x4f, 0x53, 0x49, 0x54, 0x49, 0x4f,
  0x4e, 0x30, 0x3b, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x66, 0x6c, 0x6f, 0x61,
  0x74, 0x32, 0x20, 0x55, 0x56, 0x20, 0x3a, 0x20, 0x54, 0x45, 0x58, 0x43,
  0x4f, 0x4f, 0x52, 0x44, 0x30, 0x3b, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x66,
  0x6c, 0x6f, 0x61, 0x74, 0x34, 0x20, 0x43, 0x20, 0x3a, 0x20, 0x43, 0x4f,
  0x4c, 0x4f, 0x52, 0x30, 0x3b, 0x0a, 0x7d, 0x3b, 0x0a, 0x0a, 0x73, 0x74,
  0x72, 0x75, 0x63, 0x74, 0x20, 0x76, 0x73, 0x5f, 0x6f, 0x75, 0x74, 0x70,
  0x75, 0x74, 0x20, 0x7b, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x66, 0x6c, 0x6f,
  0x61, 0x74, 0x34, 0x20, 0x50, 0x20, 0x3a, 0x20, 0x53, 0x56, 0x5f, 0x50,
  0x4f, 0x53, 0x49, 0x54, 0x49, 0x4f, 0x4e, 0x3b, 0x0a, 0x20, 0x20, 0x20,
  0x20, 0x66, 0x6c, 0x6f, 0x61, 0x74, 0x34, 0x20, 0x43, 0x20, 0x3a, 0x20,
  0x43, 0x4f, 0x4c, 0x4f, 0x52, 0x30, 0x3b, 0x0a, 0x20, 0x20, 0x20, 0x20,
  0x66, 0x6c, 0x6f, 0x61, 0x74, 0x32, 0x20, 0x55, 0x56, 0x20, 0x3a, 0x20,
  0x54, 0x45, 0x58, 0x43, 0x4f, 0x4f, 0x52, 0x44, 0x30, 0x3b, 0x0a, 0x7d,
  0x3b, 0x0a, 0x0a, 0x73, 0x74, 0x72, 0x75, 0x63, 0x74, 0x20, 0x73, 0x68,
  0x61, 0x64, 0x65, 0x72, 0x5f, 0x67, 0x6c, 0x6f, 0x62, 0x61, 0x6c, 0x20,
  0x7b, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x66, 0x6c, 0x6f, 0x61, 0x74, 0x32,
  0x20, 0x49, 0x6e, 0x76, 0x52, 0x65, 0x73, 0x6f, 0x6c, 0x75, 0x74, 0x69,
  0x6f, 0x6e, 0x3b, 0x0a, 0x7d, 0x3b, 0x0a, 0x0a, 0x54, 0x65, 0x78, 0x74,
  0x75, 0x72, 0x65, 0x32, 0x44, 0x20, 0x54, 0x65, 0x78, 0x74, 0x75, 0x72,
  0x65, 0x20, 0x3a, 0x20, 0x72, 0x65, 0x67, 0x69, 0x73, 0x74, 0x65, 0x72,
  0x28, 0x74, 0x30, 0x2c, 0x20, 0x73, 0x70, 0x61, 0x63, 0x65, 0x30, 0x29,
  0x3b, 0x0a, 0x53, 0x61, 0x6d, 0x70, 0x6c, 0x65, 0x72, 0x53, 0x74, 0x61,
  0x74, 0x65, 0x20, 0x53, 0x61, 0x6d, 0x70, 0x6c, 0x65, 0x72, 0x20, 0x3a,
  0x20, 0x72, 0x65, 0x67, 0x69, 0x73, 0x74, 0x65, 0x72, 0x28, 0x73, 0x31,
  0x2c, 0x20, 0x73, 0x70, 0x61, 0x63, 0x65, 0x30, 0x29, 0x3b, 0x0a, 0x0a,
  0x5b, 0x5b, 0x76, 0x6b, 0x3a, 0x3a, 0x70, 0x75, 0x73, 0x68, 0x5f, 0x63,
  0x6f, 0x6e, 0x73, 0x74, 0x61, 0x6e, 0x74, 0x5d, 0x5d, 0x0a, 0x43, 0x6f,
  0x6e, 0x73, 0x74, 0x61, 0x6e, 0x74, 0x42, 0x75, 0x66, 0x66, 0x65, 0x72,
  0x3c, 0x73, 0x68, 0x61, 0x64, 0x65, 0x72, 0x5f, 0x67, 0x6c, 0x6f, 0x62,
  0x61, 0x6c, 0x3e, 0x20, 0x47, 0x6c, 0x6f, 0x62, 0x61, 0x6c, 0x73, 0x20,
  0x3a, 0x20, 0x72, 0x65, 0x67, 0x69, 0x73, 0x74, 0x65, 0x72, 0x28, 0x62,
  0x30, 0x2c, 0x20, 0x73, 0x70, 0x61, 0x63, 0x65, 0x31, 0x29, 0x3b, 0x0a,
  0x0a, 0x76, 0x73, 0x5f, 0x6f, 0x75, 0x74, 0x70, 0x75, 0x74, 0x20, 0x56,
  0x53, 0x5f, 0x4d, 0x61, 0x69, 0x6e, 0x28, 0x76, 0x73, 0x5f, 0x69, 0x6e,
  0x70, 0x75, 0x74, 0x20, 0x56, 0x74, 0x78, 0x29, 0x20, 0x7b, 0x0a, 0x20,
  0x20, 0x20, 0x20, 0x76, 0x73, 0x5f, 0x6f, 0x75, 0x74, 0x70, 0x75, 0x74,
  0x20, 0x52, 0x65, 0x73, 0x75, 0x6c, 0x74, 0x20, 0x3d, 0x20, 0x28, 0x76,
  0x73, 0x5f, 0x6f, 0x75, 0x74, 0x70, 0x75, 0x74, 0x29, 0x30, 0x3b, 0x0a,
  0x0a, 0x09, 0x52, 0x65, 0x73, 0x75, 0x6c, 0x74, 0x2e, 0x50, 0x20, 0x3d,
  0x20, 0x66, 0x6c, 0x6f, 0x61, 0x74, 0x34, 0x28, 0x28, 0x32, 0x2e, 0x30,
  0x66, 0x2a, 0x56, 0x74, 0x78, 0x2e, 0x50, 0x2e, 0x78, 0x2a, 0x47, 0x6c,
  0x6f, 0x62, 0x61, 0x6c, 0x73, 0x2e, 0x49, 0x6e, 0x76, 0x52, 0x65, 0x73,
  0x6f, 0x6c, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x78, 0x29, 0x2d, 0x31,
  0x2e, 0x30, 0x66, 0x2c, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
  0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
  0x20, 0x20, 0x20, 0x28, 0x32, 0x2e, 0x30, 0x66, 0x2a, 0x56, 0x74, 0x78,
  0x2e, 0x50, 0x2e, 0x79, 0x2a, 0x47, 0x6c, 0x6f, 0x62, 0x61, 0x6c, 0x73,
  0x2e, 0x49, 0x6e, 0x76, 0x52, 0x65, 0x73, 0x6f, 0x6c, 0x75, 0x74, 0x69,
  0x6f, 0x6e, 0x2e, 0x79, 0x29, 0x2d, 0x31, 0x2e, 0x30, 0x66, 0x2c, 0x20,
  0x0a, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
  0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x30,
  0x2e, 0x30, 0x66, 0x2c, 0x20, 0x31, 0x2e, 0x30, 0x66, 0x29, 0x3b, 0x20,
  0x20, 0x20, 0x20, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x0a, 0x20, 0x20, 0x20,
  0x20, 0x52, 0x65, 0x73, 0x75, 0x6c, 0x74, 0x2e, 0x55, 0x56, 0x20, 0x3d,
  0x20, 0x56, 0x74, 0x78, 0x2e, 0x55, 0x56, 0x3b, 0x0a, 0x20, 0x20, 0x20,
  0x20, 0x52, 0x65, 0x73, 0x75, 0x6c, 0x74, 0x2e, 0x43, 0x20, 0x3d, 0x20,
  0x56, 0x74, 0x78, 0x2e, 0x43, 0x3b, 0x0a, 0x0a, 0x20, 0x20, 0x20, 0x20,
  0x72, 0x65, 0x74, 0x75, 0x72, 0x6e, 0x20, 0x52, 0x65, 0x73, 0x75, 0x6c,
  0x74, 0x3b, 0x0a, 0x7d, 0x0a, 0x0a, 0x66, 0x6c, 0x6f, 0x61, 0x74, 0x34,
  0x20, 0x50, 0x53, 0x5f, 0x4d, 0x61, 0x69, 0x6e, 0x28, 0x76, 0x73, 0x5f,
  0x6f, 0x75, 0x74, 0x70, 0x75, 0x74, 0x20, 0x50, 0x78, 0x6c, 0x29, 0x20,
  0x3a, 0x20, 0x53, 0x56, 0x5f, 0x54, 0x41, 0x52, 0x47, 0x45, 0x54, 0x30,
  0x20, 0x7b, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x66, 0x6c, 0x6f, 0x61, 0x74,
  0x34, 0x20, 0x52, 0x65, 0x73, 0x75, 0x6c, 0x74, 0x20, 0x3d, 0x20, 0x50,
  0x78, 0x6c, 0x2e, 0x43, 0x2a, 0x54, 0x65, 0x78, 0x74, 0x75, 0x72, 0x65,
  0x2e, 0x53, 0x61, 0x6d, 0x70, 0x6c, 0x65, 0x28, 0x53, 0x61, 0x6d, 0x70,
  0x6c, 0x65, 0x72, 0x2c, 0x20, 0x50, 0x78, 0x6c, 0x2e, 0x55, 0x56, 0x29,
  0x3b, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x72, 0x65, 0x74, 0x75, 0x72, 0x6e,
  0x20, 0x52, 0x65, 0x73, 0x75, 0x6c, 0x74, 0x3b, 0x0a, 0x7d, 0x00, 0x00,
  0x05, 0x00, 0x0b, 0x00, 0x09, 0x00, 0x00, 0x00, 0x74, 0x79, 0x70, 0x65,
  0x2e, 0x43, 0x6f, 0x6e, 0x73, 0x74, 0x61, 0x6e, 0x74, 0x42, 0x75, 0x66,
  0x66, 0x65, 0x72, 0x2e, 0x73, 0x68, 0x61, 0x64, 0x65, 0x72, 0x5f, 0x67,
  0x6c, 0x6f, 0x62, 0x61, 0x6c, 0x00, 0x00, 0x00, 0x06, 0x00, 0x07, 0x00,
  0x09, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x49, 0x6e, 0x76, 0x52,
  0x65, 0x73, 0x6f, 0x6c, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x00, 0x00, 0x00,
  0x05, 0x00, 0x04, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x47, 0x6c, 0x6f, 0x62,
  0x61, 0x6c, 0x73, 0x00, 0x05, 0x00, 0x07, 0x00, 0x02, 0x00, 0x00, 0x00,
  0x69, 0x6e, 0x2e, 0x76, 0x61, 0x72, 0x2e, 0x50, 0x4f, 0x53, 0x49, 0x54,
  0x49, 0x4f, 0x4e, 0x30, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x07, 0x00,
  0x03, 0x00, 0x00, 0x00, 0x69, 0x6e, 0x2e, 0x76, 0x61, 0x72, 0x2e, 0x54,
  0x45, 0x58, 0x43, 0x4f, 0x4f, 0x52, 0x44, 0x30, 0x00, 0x00, 0x00, 0x00,
  0x05, 0x00, 0x06, 0x00, 0x04, 0x00, 0x00, 0x00, 0x69, 0x6e, 0x2e, 0x76,
  0x61, 0x72, 0x2e, 0x43, 0x4f, 0x4c, 0x4f, 0x52, 0x30, 0x00, 0x00, 0x00,
  0x05, 0x00, 0x06, 0x00, 0x06, 0x00, 0x00, 0x00, 0x6f, 0x75, 0x74, 0x2e,
  0x76, 0x61, 0x72, 0x2e, 0x43, 0x4f, 0x4c, 0x4f, 0x52, 0x30, 0x00, 0x00,
  0x05, 0x00, 0x07, 0x00, 0x07, 0x00, 0x00, 0x00, 0x6f, 0x75, 0x74, 0x2e,
  0x76, 0x61, 0x72, 0x2e, 0x54, 0x45, 0x58, 0x43, 0x4f, 0x4f, 0x52, 0x44,
  0x30, 0x00, 0x00, 0x00, 0x05, 0x00, 0x04, 0x00, 0x01, 0x00, 0x00, 0x00,
  0x56, 0x53, 0x5f, 0x4d, 0x61, 0x69, 0x6e, 0x00, 0x47, 0x00, 0x04, 0x00,
  0x05, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x47, 0x00, 0x04, 0x00, 0x02, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x47, 0x00, 0x04, 0x00, 0x03, 0x00, 0x00, 0x00,
  0x1e, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x47, 0x00, 0x04, 0x00,
  0x04, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00,
  0x47, 0x00, 0x04, 0x00, 0x06, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x47, 0x00, 0x04, 0x00, 0x07, 0x00, 0x00, 0x00,
  0x1e, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x48, 0x00, 0x05, 0x00,
  0x09, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x23, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x47, 0x00, 0x03, 0x00, 0x09, 0x00, 0x00, 0x00,
  0x02, 0x00, 0x00, 0x00, 0x16, 0x00, 0x03, 0x00, 0x0b, 0x00, 0x00, 0x00,
  0x20, 0x00, 0x00, 0x00, 0x17, 0x00, 0x04, 0x00, 0x0c, 0x00, 0x00, 0x00,
  0x0b, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x17, 0x00, 0x04, 0x00,
  0x0d, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00,
  0x2b, 0x00, 0x04, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x40, 0x15, 0x00, 0x04, 0x00, 0x0f, 0x00, 0x00, 0x00,
  0x20, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x2b, 0x00, 0x04, 0x00,
  0x0f, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x2b, 0x00, 0x04, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x11, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x80, 0x3f, 0x2b, 0x00, 0x04, 0x00, 0x0f, 0x00, 0x00, 0x00,
  0x12, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x2b, 0x00, 0x04, 0x00,
  0x0b, 0x00, 0x00, 0x00, 0x13, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x1e, 0x00, 0x03, 0x00, 0x09, 0x00, 0x00, 0x00, 0x0d, 0x00, 0x00, 0x00,
  0x20, 0x00, 0x04, 0x00, 0x14, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00,
  0x09, 0x00, 0x00, 0x00, 0x20, 0x00, 0x04, 0x00, 0x15, 0x00, 0x00, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x0d, 0x00, 0x00, 0x00, 0x20, 0x00, 0x04, 0x00,
  0x16, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x00, 0x00,
  0x20, 0x00, 0x04, 0x00, 0x17, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00,
  0x0c, 0x00, 0x00, 0x00, 0x20, 0x00, 0x04, 0x00, 0x18, 0x00, 0x00, 0x00,
  0x03, 0x00, 0x00, 0x00, 0x0d, 0x00, 0x00, 0x00, 0x13, 0x00, 0x02, 0x00,
  0x19, 0x00, 0x00, 0x00, 0x21, 0x00, 0x03, 0x00, 0x1a, 0x00, 0x00, 0x00,
  0x19, 0x00, 0x00, 0x00, 0x20, 0x00, 0x04, 0x00, 0x1b, 0x00, 0x00, 0x00,
  0x09, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x3b, 0x00, 0x04, 0x00,
  0x14, 0x00, 0x00, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00,
  0x3b, 0x00, 0x04, 0x00, 0x15, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x3b, 0x00, 0x04, 0x00, 0x15, 0x00, 0x00, 0x00,
  0x03, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x3b, 0x00, 0x04, 0x00,
  0x16, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
  0x3b, 0x00, 0x04, 0x00, 0x17, 0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00,
  0x03, 0x00, 0x00, 0x00, 0x3b, 0x00, 0x04, 0x00, 0x17, 0x00, 0x00, 0x00,
  0x06, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x3b, 0x00, 0x04, 0x00,
  0x18, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00,
  0x08, 0x00, 0x04, 0x00, 0x08, 0x00, 0x00, 0x00, 0x17, 0x00, 0x00, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x36, 0x00, 0x05, 0x00, 0x19, 0x00, 0x00, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1a, 0x00, 0x00, 0x00,
  0x3d, 0x01, 0x01, 0x00, 0xf8, 0x00, 0x02, 0x00, 0x1c, 0x00, 0x00, 0x00,
  0x08, 0x00, 0x04, 0x00, 0x08, 0x00, 0x00, 0x00, 0x17, 0x00, 0x00, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x3d, 0x00, 0x04, 0x00, 0x0d, 0x00, 0x00, 0x00,
  0x1d, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x3d, 0x00, 0x04, 0x00,
  0x0d, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00,
  0x3d, 0x00, 0x04, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x1f, 0x00, 0x00, 0x00,
  0x04, 0x00, 0x00, 0x00, 0x08, 0x00, 0x04, 0x00, 0x08, 0x00, 0x00, 0x00,
  0x1a, 0x00, 0x00, 0x00, 0x1a, 0x00, 0x00, 0x00, 0x51, 0x00, 0x05, 0x00,
  0x0b, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x1d, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x04, 0x00, 0x08, 0x00, 0x00, 0x00,
  0x1a, 0x00, 0x00, 0x00, 0x19, 0x00, 0x00, 0x00, 0x85, 0x00, 0x05, 0x00,
  0x0b, 0x00, 0x00, 0x00, 0x21, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00,
  0x20, 0x00, 0x00, 0x00, 0x08, 0x00, 0x04, 0x00, 0x08, 0x00, 0x00, 0x00,
  0x1a, 0x00, 0x00, 0x00, 0x22, 0x00, 0x00, 0x00, 0x41, 0x00, 0x06, 0x00,
  0x1b, 0x00, 0x00, 0x00, 0x22, 0x00, 0x00, 0x00, 0x0a, 0x00, 0x00, 0x00,
  0x10, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x3d, 0x00, 0x04, 0x00,
  0x0b, 0x00, 0x00, 0x00, 0x23, 0x00, 0x00, 0x00, 0x22, 0x00, 0x00, 0x00,
  0x08, 0x00, 0x04, 0x00, 0x08, 0x00, 0x00, 0x00, 0x1a, 0x00, 0x00, 0x00,
  0x21, 0x00, 0x00, 0x00, 0x85, 0x00, 0x05, 0x00, 0x0b, 0x00, 0x00, 0x00,
  0x24, 0x00, 0x00, 0x00, 0x21, 0x00, 0x00, 0x00, 0x23, 0x00, 0x00, 0x00,
  0x08, 0x00, 0x04, 0x00, 0x08, 0x00, 0x00, 0x00, 0x1a, 0x00, 0x00, 0x00,
  0x3a, 0x00, 0x00, 0x00, 0x83, 0x00, 0x05, 0x00, 0x0b, 0x00, 0x00, 0x00,
  0x25, 0x00, 0x00, 0x00, 0x24, 0x00, 0x00, 0x00, 0x11, 0x00, 0x00, 0x00,
  0x08, 0x00, 0x04, 0x00, 0x08, 0x00, 0x00, 0x00, 0x1b, 0x00, 0x00, 0x00,
  0x1d, 0x00, 0x00, 0x00, 0x51, 0x00, 0x05, 0x00, 0x0b, 0x00, 0x00, 0x00,
  0x26, 0x00, 0x00, 0x00, 0x1d, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
  0x08, 0x00, 0x04, 0x00, 0x08, 0x00, 0x00, 0x00, 0x1b, 0x00, 0x00, 0x00,
  0x1c, 0x00, 0x00, 0x00, 0x85, 0x00, 0x05, 0x00, 0x0b, 0x00, 0x00, 0x00,
  0x27, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x26, 0x00, 0x00, 0x00,
  0x08, 0x00, 0x04, 0x00, 0x08, 0x00, 0x00, 0x00, 0x1b, 0x00, 0x00, 0x00,
  0x25, 0x00, 0x00, 0x00, 0x41, 0x00, 0x06, 0x00, 0x1b, 0x00, 0x00, 0x00,
  0x28, 0x00, 0x00, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00,
  0x12, 0x00, 0x00, 0x00, 0x3d, 0x00, 0x04, 0x00, 0x0b, 0x00, 0x00, 0x00,
  0x29, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x08, 0x00, 0x04, 0x00,
  0x08, 0x00, 0x00, 0x00, 0x1b, 0x00, 0x00, 0x00, 0x24, 0x00, 0x00, 0x00,
  0x85, 0x00, 0x05, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x2a, 0x00, 0x00, 0x00,
  0x27, 0x00, 0x00, 0x00, 0x29, 0x00, 0x00, 0x00, 0x08, 0x00, 0x04, 0x00,
  0x08, 0x00, 0x00, 0x00, 0x1b, 0x00, 0x00, 0x00, 0x3d, 0x00, 0x00, 0x00,
  0x83, 0x00, 0x05, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x2b, 0x00, 0x00, 0x00,
  0x2a, 0x00, 0x00, 0x00, 0x11, 0x00, 0x00, 0x00, 0x08, 0x00, 0x04, 0x00,
  0x08, 0x00, 0x00, 0x00, 0x1a, 0x00, 0x00, 0x00, 0x13, 0x00, 0x00, 0x00,
  0x50, 0x00, 0x07, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x2c, 0x00, 0x00, 0x00,
  0x25, 0x00, 0x00, 0x00, 0x2b, 0x00, 0x00, 0x00, 0x13, 0x00, 0x00, 0x00,
  0x11, 0x00, 0x00, 0x00, 0x08, 0x00, 0x04, 0x00, 0x08, 0x00, 0x00, 0x00,
  0x17, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x03, 0x00,
  0x05, 0x00, 0x00, 0x00, 0x2c, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x03, 0x00,
  0x06, 0x00, 0x00, 0x00, 0x1f, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x03, 0x00,
  0x07, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x08, 0x00, 0x04, 0x00,
  0x08, 0x00, 0x00, 0x00, 0x22, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
  0xfd, 0x00, 0x01, 0x00, 0x38, 0x00, 0x01, 0x00
};

const unsigned char Pixel_Shader_Code[] = {
  0x03, 0x02, 0x23, 0x07, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x0e, 0x00,
  0x1d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x11, 0x00, 0x02, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x08, 0x00, 0x04, 0x00, 0x00, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x50, 0x53, 0x5f, 0x4d, 0x61, 0x69, 0x6e, 0x00,
  0x02, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00,
  0x10, 0x00, 0x03, 0x00, 0x01, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00,
  0x07, 0x00, 0x07, 0x00, 0x05, 0x00, 0x00, 0x00, 0x69, 0x6d, 0x67, 0x75,
  0x69, 0x5f, 0x69, 0x6d, 0x70, 0x6c, 0x5f, 0x67, 0x64, 0x69, 0x2e, 0x68,
  0x6c, 0x73, 0x6c, 0x00, 0x03, 0x00, 0xdd, 0x00, 0x05, 0x00, 0x00, 0x00,
  0x58, 0x02, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x73, 0x74, 0x72, 0x75,
  0x63, 0x74, 0x20, 0x76, 0x73, 0x5f, 0x69, 0x6e, 0x70, 0x75, 0x74, 0x20,
  0x7b, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x66, 0x6c, 0x6f, 0x61, 0x74, 0x32,
  0x20, 0x50, 0x20, 0x3a, 0x20, 0x50, 0x4f, 0x53, 0x49, 0x54, 0x49, 0x4f,
  0x4e, 0x30, 0x3b, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x66, 0x6c, 0x6f, 0x61,
  0x74, 0x32, 0x20, 0x55, 0x56, 0x20, 0x3a, 0x20, 0x54, 0x45, 0x58, 0x43,
  0x4f, 0x4f, 0x52, 0x44, 0x30, 0x3b, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x66,
  0x6c, 0x6f, 0x61, 0x74, 0x34, 0x20, 0x43, 0x20, 0x3a, 0x20, 0x43, 0x4f,
  0x4c, 0x4f, 0x52, 0x30, 0x3b, 0x0a, 0x7d, 0x3b, 0x0a, 0x0a, 0x73, 0x74,
  0x72, 0x75, 0x63, 0x74, 0x20, 0x76, 0x73, 0x5f, 0x6f, 0x75, 0x74, 0x70,
  0x75, 0x74, 0x20, 0x7b, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x66, 0x6c, 0x6f,
  0x61, 0x74, 0x34, 0x20, 0x50, 0x20, 0x3a, 0x20, 0x53, 0x56, 0x5f, 0x50,
  0x4f, 0x53, 0x49, 0x54, 0x49, 0x4f, 0x4e, 0x3b, 0x0a, 0x20, 0x20, 0x20,
  0x20, 0x66, 0x6c, 0x6f, 0x61, 0x74, 0x34, 0x20, 0x43, 0x20, 0x3a, 0x20,
  0x43, 0x4f, 0x4c, 0x4f, 0x52, 0x30, 0x3b, 0x0a, 0x20, 0x20, 0x20, 0x20,
  0x66, 0x6c, 0x6f, 0x61, 0x74, 0x32, 0x20, 0x55, 0x56, 0x20, 0x3a, 0x20,
  0x54, 0x45, 0x58, 0x43, 0x4f, 0x4f, 0x52, 0x44, 0x30, 0x3b, 0x0a, 0x7d,
  0x3b, 0x0a, 0x0a, 0x73, 0x74, 0x72, 0x75, 0x63, 0x74, 0x20, 0x73, 0x68,
  0x61, 0x64, 0x65, 0x72, 0x5f, 0x67, 0x6c, 0x6f, 0x62, 0x61, 0x6c, 0x20,
  0x7b, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x66, 0x6c, 0x6f, 0x61, 0x74, 0x32,
  0x20, 0x49, 0x6e, 0x76, 0x52, 0x65, 0x73, 0x6f, 0x6c, 0x75, 0x74, 0x69,
  0x6f, 0x6e, 0x3b, 0x0a, 0x7d, 0x3b, 0x0a, 0x0a, 0x54, 0x65, 0x78, 0x74,
  0x75, 0x72, 0x65, 0x32, 0x44, 0x20, 0x54, 0x65, 0x78, 0x74, 0x75, 0x72,
  0x65, 0x20, 0x3a, 0x20, 0x72, 0x65, 0x67, 0x69, 0x73, 0x74, 0x65, 0x72,
  0x28, 0x74, 0x30, 0x2c, 0x20, 0x73, 0x70, 0x61, 0x63, 0x65, 0x30, 0x29,
  0x3b, 0x0a, 0x53, 0x61, 0x6d, 0x70, 0x6c, 0x65, 0x72, 0x53, 0x74, 0x61,
  0x74, 0x65, 0x20, 0x53, 0x61, 0x6d, 0x70, 0x6c, 0x65, 0x72, 0x20, 0x3a,
  0x20, 0x72, 0x65, 0x67, 0x69, 0x73, 0x74, 0x65, 0x72, 0x28, 0x73, 0x31,
  0x2c, 0x20, 0x73, 0x70, 0x61, 0x63, 0x65, 0x30, 0x29, 0x3b, 0x0a, 0x0a,
  0x5b, 0x5b, 0x76, 0x6b, 0x3a, 0x3a, 0x70, 0x75, 0x73, 0x68, 0x5f, 0x63,
  0x6f, 0x6e, 0x73, 0x74, 0x61, 0x6e, 0x74, 0x5d, 0x5d, 0x0a, 0x43, 0x6f,
  0x6e, 0x73, 0x74, 0x61, 0x6e, 0x74, 0x42, 0x75, 0x66, 0x66, 0x65, 0x72,
  0x3c, 0x73, 0x68, 0x61, 0x64, 0x65, 0x72, 0x5f, 0x67, 0x6c, 0x6f, 0x62,
  0x61, 0x6c, 0x3e, 0x20, 0x47, 0x6c, 0x6f, 0x62, 0x61, 0x6c, 0x73, 0x20,
  0x3a, 0x20, 0x72, 0x65, 0x67, 0x69, 0x73, 0x74, 0x65, 0x72, 0x28, 0x62,
  0x30, 0x2c, 0x20, 0x73, 0x70, 0x61, 0x63, 0x65, 0x31, 0x29, 0x3b, 0x0a,
  0x0a, 0x76, 0x73, 0x5f, 0x6f, 0x75, 0x74, 0x70, 0x75, 0x74, 0x20, 0x56,
  0x53, 0x5f, 0x4d, 0x61, 0x69, 0x6e, 0x28, 0x76, 0x73, 0x5f, 0x69, 0x6e,
  0x70, 0x75, 0x74, 0x20, 0x56, 0x74, 0x78, 0x29, 0x20, 0x7b, 0x0a, 0x20,
  0x20, 0x20, 0x20, 0x76, 0x73, 0x5f, 0x6f, 0x75, 0x74, 0x70, 0x75, 0x74,
  0x20, 0x52, 0x65, 0x73, 0x75, 0x6c, 0x74, 0x20, 0x3d, 0x20, 0x28, 0x76,
  0x73, 0x5f, 0x6f, 0x75, 0x74, 0x70, 0x75, 0x74, 0x29, 0x30, 0x3b, 0x0a,
  0x0a, 0x09, 0x52, 0x65, 0x73, 0x75, 0x6c, 0x74, 0x2e, 0x50, 0x20, 0x3d,
  0x20, 0x66, 0x6c, 0x6f, 0x61, 0x74, 0x34, 0x28, 0x28, 0x32, 0x2e, 0x30,
  0x66, 0x2a, 0x56, 0x74, 0x78, 0x2e, 0x50, 0x2e, 0x78, 0x2a, 0x47, 0x6c,
  0x6f, 0x62, 0x61, 0x6c, 0x73, 0x2e, 0x49, 0x6e, 0x76, 0x52, 0x65, 0x73,
  0x6f, 0x6c, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x78, 0x29, 0x2d, 0x31,
  0x2e, 0x30, 0x66, 0x2c, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
  0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
  0x20, 0x20, 0x20, 0x28, 0x32, 0x2e, 0x30, 0x66, 0x2a, 0x56, 0x74, 0x78,
  0x2e, 0x50, 0x2e, 0x79, 0x2a, 0x47, 0x6c, 0x6f, 0x62, 0x61, 0x6c, 0x73,
  0x2e, 0x49, 0x6e, 0x76, 0x52, 0x65, 0x73, 0x6f, 0x6c, 0x75, 0x74, 0x69,
  0x6f, 0x6e, 0x2e, 0x79, 0x29, 0x2d, 0x31, 0x2e, 0x30, 0x66, 0x2c, 0x20,
  0x0a, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
  0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x30,
  0x2e, 0x30, 0x66, 0x2c, 0x20, 0x31, 0x2e, 0x30, 0x66, 0x29, 0x3b, 0x20,
  0x20, 0x20, 0x20, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x0a, 0x20, 0x20, 0x20,
  0x20, 0x52, 0x65, 0x73, 0x75, 0x6c, 0x74, 0x2e, 0x55, 0x56, 0x20, 0x3d,
  0x20, 0x56, 0x74, 0x78, 0x2e, 0x55, 0x56, 0x3b, 0x0a, 0x20, 0x20, 0x20,
  0x20, 0x52, 0x65, 0x73, 0x75, 0x6c, 0x74, 0x2e, 0x43, 0x20, 0x3d, 0x20,
  0x56, 0x74, 0x78, 0x2e, 0x43, 0x3b, 0x0a, 0x0a, 0x20, 0x20, 0x20, 0x20,
  0x72, 0x65, 0x74, 0x75, 0x72, 0x6e, 0x20, 0x52, 0x65, 0x73, 0x75, 0x6c,
  0x74, 0x3b, 0x0a, 0x7d, 0x0a, 0x0a, 0x66, 0x6c, 0x6f, 0x61, 0x74, 0x34,
  0x20, 0x50, 0x53, 0x5f, 0x4d, 0x61, 0x69, 0x6e, 0x28, 0x76, 0x73, 0x5f,
  0x6f, 0x75, 0x74, 0x70, 0x75, 0x74, 0x20, 0x50, 0x78, 0x6c, 0x29, 0x20,
  0x3a, 0x20, 0x53, 0x56, 0x5f, 0x54, 0x41, 0x52, 0x47, 0x45, 0x54, 0x30,
  0x20, 0x7b, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x66, 0x6c, 0x6f, 0x61, 0x74,
  0x34, 0x20, 0x52, 0x65, 0x73, 0x75, 0x6c, 0x74, 0x20, 0x3d, 0x20, 0x50,
  0x78, 0x6c, 0x2e, 0x43, 0x2a, 0x54, 0x65, 0x78, 0x74, 0x75, 0x72, 0x65,
  0x2e, 0x53, 0x61, 0x6d, 0x70, 0x6c, 0x65, 0x28, 0x53, 0x61, 0x6d, 0x70,
  0x6c, 0x65, 0x72, 0x2c, 0x20, 0x50, 0x78, 0x6c, 0x2e, 0x55, 0x56, 0x29,
  0x3b, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x72, 0x65, 0x74, 0x75, 0x72, 0x6e,
  0x20, 0x52, 0x65, 0x73, 0x75, 0x6c, 0x74, 0x3b, 0x0a, 0x7d, 0x00, 0x00,
  0x05, 0x00, 0x06, 0x00, 0x06, 0x00, 0x00, 0x00, 0x74, 0x79, 0x70, 0x65,
  0x2e, 0x32, 0x64, 0x2e, 0x69, 0x6d, 0x61, 0x67, 0x65, 0x00, 0x00, 0x00,
  0x05, 0x00, 0x04, 0x00, 0x07, 0x00, 0x00, 0x00, 0x54, 0x65, 0x78, 0x74,
  0x75, 0x72, 0x65, 0x00, 0x05, 0x00, 0x06, 0x00, 0x08, 0x00, 0x00, 0x00,
  0x74, 0x79, 0x70, 0x65, 0x2e, 0x73, 0x61, 0x6d, 0x70, 0x6c, 0x65, 0x72,
  0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x04, 0x00, 0x09, 0x00, 0x00, 0x00,
  0x53, 0x61, 0x6d, 0x70, 0x6c, 0x65, 0x72, 0x00, 0x05, 0x00, 0x06, 0x00,
  0x02, 0x00, 0x00, 0x00, 0x69, 0x6e, 0x2e, 0x76, 0x61, 0x72, 0x2e, 0x43,
  0x4f, 0x4c, 0x4f, 0x52, 0x30, 0x00, 0x00, 0x00, 0x05, 0x00, 0x07, 0x00,
  0x03, 0x00, 0x00, 0x00, 0x69, 0x6e, 0x2e, 0x76, 0x61, 0x72, 0x2e, 0x54,
  0x45, 0x58, 0x43, 0x4f, 0x4f, 0x52, 0x44, 0x30, 0x00, 0x00, 0x00, 0x00,
  0x05, 0x00, 0x07, 0x00, 0x04, 0x00, 0x00, 0x00, 0x6f, 0x75, 0x74, 0x2e,
  0x76, 0x61, 0x72, 0x2e, 0x53, 0x56, 0x5f, 0x54, 0x41, 0x52, 0x47, 0x45,
  0x54, 0x30, 0x00, 0x00, 0x05, 0x00, 0x04, 0x00, 0x01, 0x00, 0x00, 0x00,
  0x50, 0x53, 0x5f, 0x4d, 0x61, 0x69, 0x6e, 0x00, 0x05, 0x00, 0x07, 0x00,
  0x0a, 0x00, 0x00, 0x00, 0x74, 0x79, 0x70, 0x65, 0x2e, 0x73, 0x61, 0x6d,
  0x70, 0x6c, 0x65, 0x64, 0x2e, 0x69, 0x6d, 0x61, 0x67, 0x65, 0x00, 0x00,
  0x47, 0x00, 0x04, 0x00, 0x02, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x47, 0x00, 0x04, 0x00, 0x03, 0x00, 0x00, 0x00,
  0x1e, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x47, 0x00, 0x04, 0x00,
  0x04, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x47, 0x00, 0x04, 0x00, 0x07, 0x00, 0x00, 0x00, 0x22, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x47, 0x00, 0x04, 0x00, 0x07, 0x00, 0x00, 0x00,
  0x21, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x47, 0x00, 0x04, 0x00,
  0x09, 0x00, 0x00, 0x00, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x47, 0x00, 0x04, 0x00, 0x09, 0x00, 0x00, 0x00, 0x21, 0x00, 0x00, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x16, 0x00, 0x03, 0x00, 0x0b, 0x00, 0x00, 0x00,
  0x20, 0x00, 0x00, 0x00, 0x19, 0x00, 0x09, 0x00, 0x06, 0x00, 0x00, 0x00,
  0x0b, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 0x04, 0x00, 0x0c, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 0x00, 0x1a, 0x00, 0x02, 0x00,
  0x08, 0x00, 0x00, 0x00, 0x20, 0x00, 0x04, 0x00, 0x0d, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x17, 0x00, 0x04, 0x00,
  0x0e, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00,
  0x17, 0x00, 0x04, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00,
  0x04, 0x00, 0x00, 0x00, 0x20, 0x00, 0x04, 0x00, 0x10, 0x00, 0x00, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x20, 0x00, 0x04, 0x00,
  0x11, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00,
  0x20, 0x00, 0x04, 0x00, 0x12, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00,
  0x0f, 0x00, 0x00, 0x00, 0x13, 0x00, 0x02, 0x00, 0x13, 0x00, 0x00, 0x00,
  0x21, 0x00, 0x03, 0x00, 0x14, 0x00, 0x00, 0x00, 0x13, 0x00, 0x00, 0x00,
  0x1b, 0x00, 0x03, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 0x00,
  0x3b, 0x00, 0x04, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x3b, 0x00, 0x04, 0x00, 0x0d, 0x00, 0x00, 0x00,
  0x09, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3b, 0x00, 0x04, 0x00,
  0x10, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
  0x3b, 0x00, 0x04, 0x00, 0x11, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x3b, 0x00, 0x04, 0x00, 0x12, 0x00, 0x00, 0x00,
  0x04, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x08, 0x00, 0x04, 0x00,
  0x05, 0x00, 0x00, 0x00, 0x24, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
  0x36, 0x00, 0x05, 0x00, 0x13, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x14, 0x00, 0x00, 0x00, 0x3d, 0x01, 0x01, 0x00,
  0xf8, 0x00, 0x02, 0x00, 0x15, 0x00, 0x00, 0x00, 0x08, 0x00, 0x04, 0x00,
  0x05, 0x00, 0x00, 0x00, 0x24, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
  0x3d, 0x00, 0x04, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x16, 0x00, 0x00, 0x00,
  0x02, 0x00, 0x00, 0x00, 0x3d, 0x00, 0x04, 0x00, 0x0e, 0x00, 0x00, 0x00,
  0x17, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x08, 0x00, 0x04, 0x00,
  0x05, 0x00, 0x00, 0x00, 0x25, 0x00, 0x00, 0x00, 0x1b, 0x00, 0x00, 0x00,
  0x3d, 0x00, 0x04, 0x00, 0x06, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00,
  0x07, 0x00, 0x00, 0x00, 0x08, 0x00, 0x04, 0x00, 0x05, 0x00, 0x00, 0x00,
  0x25, 0x00, 0x00, 0x00, 0x2a, 0x00, 0x00, 0x00, 0x3d, 0x00, 0x04, 0x00,
  0x08, 0x00, 0x00, 0x00, 0x19, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00,
  0x08, 0x00, 0x04, 0x00, 0x05, 0x00, 0x00, 0x00, 0x25, 0x00, 0x00, 0x00,
  0x1b, 0x00, 0x00, 0x00, 0x56, 0x00, 0x05, 0x00, 0x0a, 0x00, 0x00, 0x00,
  0x1a, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x19, 0x00, 0x00, 0x00,
  0x57, 0x00, 0x06, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x1b, 0x00, 0x00, 0x00,
  0x1a, 0x00, 0x00, 0x00, 0x17, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x08, 0x00, 0x04, 0x00, 0x05, 0x00, 0x00, 0x00, 0x25, 0x00, 0x00, 0x00,
  0x1a, 0x00, 0x00, 0x00, 0x85, 0x00, 0x05, 0x00, 0x0f, 0x00, 0x00, 0x00,
  0x1c, 0x00, 0x00, 0x00, 0x16, 0x00, 0x00, 0x00, 0x1b, 0x00, 0x00, 0x00,
  0x08, 0x00, 0x04, 0x00, 0x05, 0x00, 0x00, 0x00, 0x24, 0x00, 0x00, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x03, 0x00, 0x04, 0x00, 0x00, 0x00,
  0x1c, 0x00, 0x00, 0x00, 0x08, 0x00, 0x04, 0x00, 0x05, 0x00, 0x00, 0x00,
  0x27, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0xfd, 0x00, 0x01, 0x00,
  0x38, 0x00, 0x01, 0x00
};

function buffer Get_Vertex_Shader_Code() {
    return Make_Buffer((void*)Vertex_Shader_Code, sizeof(Vertex_Shader_Code));
}

function buffer Get_Pixel_Shader_Code() {
    return Make_Buffer((void*)Pixel_Shader_Code, sizeof(Pixel_Shader_Code));
}